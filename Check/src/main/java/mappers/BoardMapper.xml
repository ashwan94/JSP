<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board.BoardMapper">
	<select id="getBoardList" parameterType="common.SearchVO" resultType="boardVO">
		select
			a.no
			, b.name writer
			, a.title
			, a.create_date
			, a.hits
		from
			board a
			inner join member b on a.writer = b.id
	<where>
		<if test="searchType == 'title'">
			title like '%' || #{searchWord} || '%'
		</if>
		<if test="searchType == 'content'">
			content like '%' || #{searchWord} || '%'
		</if>
		<if test="searchType == 'writer'">
			b.name like '%' || #{searchWord} || '%'
		</if>
	</where>
	order by a.create_date desc
	</select>
	<select id="getBoard" parameterType="int" resultType="board.BoardVO">
		select
			a.no
			, b.name writer
			, a.title
			, a.content
			, a.modify_date
			, a.hits
		from
			board a
			inner join member b on a.writer = b.id
		where
			no = ${no}
	</select>
	<insert id="insertBoard" parameterType="board.BoardVO">
		insert into board
			(writer, title, content)
		values
			(#{writer}, #{title}, #{content})
	</insert>
	<update id="updateBoard" parameterType="board.BoardVO">
		update
			board
		set
			title = #{title}
			, content = ${content}
			, modify_date = sysdate
		where
			no = #{no}
	</update>
	<delete id="deleteBoard" parameterType="board.BoardVO">
		delete from
			board
		where
			no = #{no}
	</delete>
</mapper>
